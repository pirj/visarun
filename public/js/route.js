// TODO: store on server
var route_multiline =
  [
    [
    // Viset
      L.latLng(7.822228, 98.340683),
      L.latLng(7.807942702361766, 98.3371639251709),
      L.latLng(7.798078531355303, 98.3345890045166),
      L.latLng(7.793826661761194, 98.33106994628905),
      L.latLng(7.790977884970365, 98.33038330078125),
      L.latLng(7.7813684352845325, 98.32905292510986),
      L.latLng(7.776138420984523, 98.32772254943848),
    ],[

    // Sai Yuan
      L.latLng(7.80186265895244, 98.33557605743408),
      L.latLng(7.801522514052022, 98.33319425582886),
      L.latLng(7.801798881804685, 98.33126306533813),
      L.latLng(7.8012886642724855, 98.32958936691284),
      L.latLng(7.800842223421188, 98.32903146743774),
      L.latLng(7.799864303700742, 98.32858085632324),
      L.latLng(7.798610012016796, 98.32828044891357),
      L.latLng(7.793380212947988, 98.32529783248901),
      L.latLng(7.792806206631414, 98.32519054412842),
      L.latLng(7.792636130534623, 98.32493305206299),
      L.latLng(7.792466054368724, 98.32261562347412),
      L.latLng(7.792657390050487, 98.32145690917969),
      L.latLng(7.791658191637315, 98.31778764724731)
    ],[

    // Karon, Kata
      L.latLng(7.825459535353908, 98.29656600952147),
      L.latLng(7.827032613004427, 98.29643726348877),
      L.latLng(7.828010469092214, 98.2957935333252),
      L.latLng(7.830008689614828, 98.29493522644043),
      L.latLng(7.8390218204927855, 98.294677734375),
      L.latLng(7.840169705227967, 98.29484939575195),
      L.latLng(7.849012562917182, 98.29304695129395),
      L.latLng(7.848077269555202, 98.29562187194824),
      L.latLng(7.848119782935493, 98.2972526550293),
      L.latLng(7.847524595215722, 98.29746723175049),
      L.latLng(7.8474820817745545, 98.29828262329102),
      L.latLng(7.844846239932163, 98.29914093017578),
      L.latLng(7.84378339575262, 98.30188751220703),
      L.latLng(7.84323071570585, 98.30231666564941),
      L.latLng(7.8411900445563845, 98.30231666564941),
      L.latLng(7.840084676837644, 98.30085754394531),
      L.latLng(7.839404449089657, 98.30012798309326),
      L.latLng(7.836726041524357, 98.29918384552),
      L.latLng(7.836343410465251, 98.29888343811035),
      L.latLng(7.833452408875349, 98.29841136932373),
      L.latLng(7.832389535597917, 98.2988405227661),
      L.latLng(7.831836840421758, 98.29914093017578),
      L.latLng(7.830518872042367, 98.30055713653564),
      L.latLng(7.827393994869356, 98.30147981643675),
      L.latLng(7.82556582457135, 98.30130815505981),
      L.latLng(7.824694252188415, 98.30147981643675)
    ],[

    // Patong
      L.latLng(7.903553522727376, 98.30077171325684),
      L.latLng(7.902108258782022, 98.3007287979126),
      L.latLng(7.896454677686705, 98.29935550689697),
      L.latLng(7.8948818631716815, 98.29866886138916),
      L.latLng(7.893096498899322, 98.29836845397949),
      L.latLng(7.8907160012052895, 98.29751014709471),
      L.latLng(7.890205892773012, 98.29609394073486),
      L.latLng(7.887910397039567, 98.29536437988281),
      L.latLng(7.887102719584349, 98.29450607299805),
      L.latLng(7.885487359942264, 98.29386234283447),
      L.latLng(7.884637168123276, 98.29274654388428),
      L.latLng(7.8812363833778605, 98.29420566558838)
    ],[

    // West Chaofa
      L.latLng(7.822228330211627, 98.34068298339844),
      L.latLng(7.829923659149498, 98.34025382995604),
      L.latLng(7.838469134120694, 98.33540439605713),
      L.latLng(7.844336075064974, 98.3343744277954),
      L.latLng(7.847652135513129, 98.33441734313965),
      L.latLng(7.84952272204572, 98.33385944366455),
      L.latLng(7.850415499013757, 98.33493232727051),
      L.latLng(7.857515133275575, 98.33913803100586),
      L.latLng(7.858662966937715, 98.34201335906982),
      L.latLng(7.862106448878808, 98.3444595336914),
      L.latLng(7.867335385324457, 98.3516263961792),
      L.latLng(7.8669952939015415, 98.35450172424316),
      L.latLng(7.872989364354274, 98.36321353912354),
      L.latLng(7.881193873391692, 98.36377143859863),
      L.latLng(7.891906251766027, 98.36879253387451),
      L.latLng(7.912565054307239, 98.36780548095703),
      L.latLng(7.929227367257237, 98.37351322174071),
      L.latLng(7.953794546101191, 98.38866233825684)
    ],[

    // East Chaofa
      L.latLng(7.822228330211627, 98.34085464477539),
      L.latLng(7.824396641689146, 98.34257125854491),
      L.latLng(7.829285930106405, 98.34398746490479),
      L.latLng(7.832134445607745, 98.34566116333008),
      L.latLng(7.834600308968144, 98.34802150726318),
      L.latLng(7.841870269385155, 98.34930896759033),
      L.latLng(7.8438259095719545, 98.34943771362305),
      L.latLng(7.849225129296848, 98.35184097290039),
      L.latLng(7.85050052529162, 98.35338592529297),
      L.latLng(7.8569199590161904, 98.35935115814208),
      L.latLng(7.858195331384405, 98.36462974548338),
      L.latLng(7.862871663207479, 98.37025165557861),
      L.latLng(7.866485156244164, 98.37201118469238),
      L.latLng(7.867080316783412, 98.37355613708496),
      L.latLng(7.8686957482266076, 98.37407112121582),
      L.latLng(7.871033861534805, 98.37557315826416),
      L.latLng(7.872181657786561, 98.37784767150879),
      L.latLng(7.875922601278367, 98.37917804718018),
      L.latLng(7.881533953158753, 98.38265419006348),
      L.latLng(7.888292980546747, 98.38213920593262)
    ],[

    // Mae Luan
      L.latLng(7.886932682024367, 98.37407112121582),
      L.latLng(7.890418438029621, 98.38990688323975)
    ],[

    // Kathu
      L.latLng(7.910652245669084, 98.3334732055664),
      L.latLng(7.910567231745882, 98.33510398864746),
      L.latLng(7.910907287333565, 98.33583354949951),
      L.latLng(7.913712735230086, 98.33767890930176),
      L.latLng(7.914180308023266, 98.33883762359619),
      L.latLng(7.91375524186956, 98.34021091461182),
      L.latLng(7.912522547545022, 98.34218502044678),
      L.latLng(7.909717091549765, 98.34351539611816),
      L.latLng(7.908399370782408, 98.34767818450928),
      L.latLng(7.908484385152502, 98.34866523742676),
      L.latLng(7.906996631146023, 98.3491802215576),
      L.latLng(7.906061468738548, 98.35089683532715),
      L.latLng(7.903596030413863, 98.3521842956543),
      L.latLng(7.899940353376568, 98.35347175598145),
      L.latLng(7.898835142318617, 98.35647583007812)
    ],[

    // 402
      L.latLng(7.878643266232932, 98.39831829071045),
      L.latLng(7.878600755980488, 98.39814662933348),
      L.latLng(7.876900342303953, 98.39351177215576),
      L.latLng(7.882724230142877, 98.3909797668457),
      L.latLng(7.88595496469792, 98.39055061340332),
      L.latLng(7.89853758498994, 98.38922023773193),
      L.latLng(7.902618352517046, 98.38831901550293),
      L.latLng(7.904361168021984, 98.38879108428955),
      L.latLng(7.908016805900099, 98.39123725891112),
      L.latLng(7.91248004077844, 98.39295387268066),
      L.latLng(7.916943227335848, 98.39419841766356),
      L.latLng(7.9222564816257774, 98.39608669281006),
      L.latLng(7.928972336937222, 98.39544296264648),
      L.latLng(7.931182594457585, 98.39561462402344),
      L.latLng(7.932372728202504, 98.39531421661377),
      L.latLng(7.933817885976146, 98.39540004730225),
      L.latLng(7.935263038669908, 98.3950138092041),
      L.latLng(7.937983312309571, 98.39531421661377),
      L.latLng(7.94554897865677, 98.39295387268066)
    ],[

    // 402 2
      L.latLng(7.955792158632649, 98.38780403137207),
      L.latLng(7.967692627234335, 98.37235450744629)
    ],[

    // 402 3
      L.latLng(7.980867742486031, 98.36377143859863),
      L.latLng(7.989112598581802, 98.35561752319336),
      L.latLng(8.004666873565807, 98.3441162109375),
      L.latLng(8.010106479925101, 98.34042549133301),
      L.latLng(8.01631094220664, 98.33802223205566),
      L.latLng(8.024130129761266, 98.33398818969727),
      L.latLng(8.02740224513244, 98.33317279815674),
      L.latLng(8.034498820364167, 98.33351612091064),
      L.latLng(8.076225869236094, 98.34394454956055),
      L.latLng(8.087697928283415, 98.34145545959473),
      L.latLng(8.102058786536976, 98.3345890045166),
      L.latLng(8.104098156830672, 98.33450317382812),
      L.latLng(8.120242806633582, 98.3360481262207)
    ],[

    // Surin
      L.latLng(7.978402753201801, 98.28944206237793),
      L.latLng(7.979932748300624, 98.29218864440918),
      L.latLng(7.9800177478604155, 98.29665184020996),
      L.latLng(7.980867742486031, 98.29776763916016),
      L.latLng(7.981802734532286, 98.29811096191406),
      L.latLng(7.984692696420935, 98.30025672912598),
      L.latLng(7.98503269059315, 98.3016300201416),
      L.latLng(7.986222667967152, 98.30214500427245),
      L.latLng(7.989112598581802, 98.30214500427245),
      L.latLng(7.98783763171435, 98.31527709960936)
    ]
  ]

var bounds = L.latLngBounds(
    L.latLng(7.700104531441816, 97.59017944335936),
    L.latLng(8.244110057549225, 99.19692993164061)
  )

function nearest_map(selected) {
  return function(latLngs) {
    return latLngs.reduce(nearest_reduce(selected))
  }
}

function nearest_reduce(selected) {
  return function(min, current) {
    return selected.distanceTo(min) < selected.distanceTo(current) ? min : current
  }
}
